{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "2f2133fb_f0719f1a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1241855
      },
      "writtenOn": "2021-06-02T13:04:23Z",
      "side": 1,
      "message": "I had to create a new patch for https://android-review.googlesource.com/c/platform/packages/apps/Dialer/+/1683686 since I don\u0027t have permission to edit that one.\n",
      "revId": "634651389f3445bb92cfd8bbc23271a37c4a59a0",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9022f082_a603a2e3",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1241855
      },
      "writtenOn": "2021-06-14T12:05:58Z",
      "side": 1,
      "message": "Hi Lorenzo, may you please review this new patch?",
      "revId": "634651389f3445bb92cfd8bbc23271a37c4a59a0",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4c134939_8c2ebfa1",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000835
      },
      "writtenOn": "2021-06-14T15:54:00Z",
      "side": 1,
      "message": "Code LGTM, but the folks in the OWNERS file will need to approve as well.",
      "revId": "634651389f3445bb92cfd8bbc23271a37c4a59a0",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "45a0f294_4ed4845a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1241855
      },
      "writtenOn": "2021-06-15T14:23:34Z",
      "side": 1,
      "message": "Seems that some approval is still pending before I can submit the patch. May someone please approve?",
      "revId": "634651389f3445bb92cfd8bbc23271a37c4a59a0",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1d08438e_08b2fb12",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1241855
      },
      "writtenOn": "2021-06-17T12:15:20Z",
      "side": 1,
      "message": "I\u0027ve added the owners as reviewers. May you please check this patch?",
      "revId": "634651389f3445bb92cfd8bbc23271a37c4a59a0",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "64d54c1a_a22ac735",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1098053
      },
      "writtenOn": "2021-07-19T19:51:04Z",
      "side": 1,
      "message": "This should be reviewed by the Dialer team, as they should review AOSP Dialer code as well as integrate it into the Google Dialer.\n\nIs this a carrier specific setting? It looks like this would apply the change for all carriers.",
      "revId": "634651389f3445bb92cfd8bbc23271a37c4a59a0",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8268ffee_704d090c",
        "filename": "java/com/android/voicemail/impl/sync/VvmNetworkRequestCallback.java",
        "patchSetId": 1
      },
      "lineNbr": 144,
      "author": {
        "id": 1238610
      },
      "writtenOn": "2021-07-19T21:17:59Z",
      "side": 1,
      "message": "I\u0027m not familiar with VVM code, but generally we would avoid blocking code in case \"waitForIpv4()\" is called on the main thread.\n\nIs it possible to run a polling task that returns a ListenableFuture?",
      "range": {
        "startLine": 144,
        "startChar": 4,
        "endLine": 144,
        "endChar": 48
      },
      "revId": "634651389f3445bb92cfd8bbc23271a37c4a59a0",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2ed4f6b9_e715f8c2",
        "filename": "java/com/android/voicemail/impl/sync/VvmNetworkRequestCallback.java",
        "patchSetId": 1
      },
      "lineNbr": 144,
      "author": {
        "id": 1000835
      },
      "writtenOn": "2021-07-20T00:30:38Z",
      "side": 1,
      "message": "Looks like this is called only from getNetwork, which AFAICS is already a blocking operation because it does \"return callback.getFuture().get();\" So this should be safe unless something somehow calls waitForIpv4 outside the context of getNetwork. Not sure why any code would ever do that, now or in the future; there does not seem to be a reason ever to do so.\n\nThat said - given that FutureNetworkRequestCallback is already asynchronous, then an alternative solution would be to change VvmNetworkRequestCallback so that it only completes the future when IPv4 arrives. This isn\u0027t great because:\n- onAvailable must not call super.onAvailable, because that completes the future. This might be confusing to readers of this code.\n- On older Android releases (can\u0027t remember when; anything before P, perhaps?) onLinkProperties will not necessarily be called when the network becomes available. So if this code needs to run on older Android versions, it will need to behave in different ways depending on the Android version it\u0027s running on.\n\nGiven the above, this CL as is seems fine to me. Maybe a comment could be added to say that waitForIpv4 must only ever be called in contexts where it\u0027s OK to block, for example, in code that is already blocking on the future?",
      "parentUuid": "8268ffee_704d090c",
      "range": {
        "startLine": 144,
        "startChar": 4,
        "endLine": 144,
        "endChar": 48
      },
      "revId": "634651389f3445bb92cfd8bbc23271a37c4a59a0",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}